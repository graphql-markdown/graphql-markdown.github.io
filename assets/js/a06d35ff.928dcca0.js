"use strict";(globalThis.webpackChunk_graphql_markdown_website=globalThis.webpackChunk_graphql_markdown_website||[]).push([[3566],{28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>t});var i=r(96540);const l={},d=i.createContext(l);function s(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(d.Provider,{value:n},e.children)}},43089:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"core/options/builder","title":"builder","description":"Option builder for handling CLI/config/default option precedence.","source":"@site/api/core/options/builder.md","sourceDirName":"core/options","slug":"/core/options/builder","permalink":"/api/core/options/builder","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"builder","pagination_prev":null,"pagination_next":null,"toc_max_heading_level":2},"sidebar":"defaultSidebar"}');var l=r(74848),d=r(28453);const s={title:"builder",pagination_prev:null,pagination_next:null,toc_max_heading_level:2},t=void 0,a={},c=[{value:"OptionBuilder",id:"optionbuilder",level:2},{value:"Example",id:"example",level:3},{value:"Type Parameters",id:"type-parameters",level:3},{value:"T",id:"t",level:4},{value:"Constructors",id:"constructors",level:3},{value:"Constructor",id:"constructor",level:4},{value:"Returns",id:"returns",level:5},{value:"Methods",id:"methods",level:3},{value:"addDefault()",id:"adddefault",level:4},{value:"Type Parameters",id:"type-parameters-1",level:5},{value:"K",id:"k",level:6},{value:"Parameters",id:"parameters",level:5},{value:"value",id:"value",level:6},{value:"key",id:"key",level:6},{value:"Returns",id:"returns-1",level:5},{value:"Example",id:"example-1",level:5},{value:"addFromCli()",id:"addfromcli",level:4},{value:"Type Parameters",id:"type-parameters-2",level:5},{value:"K",id:"k-1",level:6},{value:"Parameters",id:"parameters-1",level:5},{value:"value",id:"value-1",level:6},{value:"key",id:"key-1",level:6},{value:"Returns",id:"returns-2",level:5},{value:"Example",id:"example-2",level:5},{value:"addFromConfig()",id:"addfromconfig",level:4},{value:"Type Parameters",id:"type-parameters-3",level:5},{value:"K",id:"k-2",level:6},{value:"Parameters",id:"parameters-2",level:5},{value:"value",id:"value-2",level:6},{value:"key",id:"key-2",level:6},{value:"Returns",id:"returns-3",level:5},{value:"Example",id:"example-3",level:5},{value:"build()",id:"build",level:4},{value:"Returns",id:"returns-4",level:5},{value:"get()",id:"get",level:4},{value:"Type Parameters",id:"type-parameters-4",level:5},{value:"K",id:"k-3",level:6},{value:"Parameters",id:"parameters-3",level:5},{value:"key",id:"key-3",level:6},{value:"Returns",id:"returns-5",level:5},{value:"transform()",id:"transform",level:4},{value:"Type Parameters",id:"type-parameters-5",level:5},{value:"K",id:"k-4",level:6},{value:"Parameters",id:"parameters-4",level:5},{value:"key",id:"key-4",level:6},{value:"fn",id:"fn",level:6},{value:"Returns",id:"returns-6",level:5},{value:"Example",id:"example-4",level:5},{value:"transformIf()",id:"transformif",level:4},{value:"Type Parameters",id:"type-parameters-6",level:5},{value:"K",id:"k-5",level:6},{value:"Parameters",id:"parameters-5",level:5},{value:"key",id:"key-5",level:6},{value:"predicate",id:"predicate",level:6},{value:"fn",id:"fn-1",level:6},{value:"Returns",id:"returns-7",level:5},{value:"Example",id:"example-5",level:5}];function o(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",li:"li",ol:"ol",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Option builder for handling CLI/config/default option precedence."}),"\n",(0,l.jsx)(n.p,{children:"This utility provides a fluent interface for merging options from multiple\nsources (CLI, config file, defaults) with consistent precedence rules:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"CLI options (highest priority)"}),"\n",(0,l.jsx)(n.li,{children:"Config file options"}),"\n",(0,l.jsx)(n.li,{children:"Default values (lowest priority)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Precedence is enforced semantically via the setIfProvided() method,\nregardless of the order in which methods are called. Each value tracks its\nsource, and only higher-precedence sources can override existing values."}),"\n",(0,l.jsx)(n.p,{children:"Eliminates repetitive if/coalesce patterns throughout the codebase."}),"\n",(0,l.jsx)(n.h2,{id:"optionbuilder",children:"OptionBuilder"}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:49"}),"\n",(0,l.jsx)(n.p,{children:"Builder for constructing options from multiple sources with priority precedence."}),"\n",(0,l.jsx)(n.p,{children:"Precedence is enforced semantically via source tracking, not by call order.\nCLI values always override config values, which always override defaults,\nregardless of the order in which methods are called."}),"\n",(0,l.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'const options = new OptionBuilder<MyOptions>()\n  // Add in order: default -> config -> cli\n  .addDefault(false, "pretty")\n  .addFromConfig(undefined, "pretty")\n  .addFromCli(true, "pretty") // CLI overrides default\n  .addDefault("/", "baseURL")\n  .addFromConfig("/api", "baseURL") // Config overrides default\n  .addFromCli(undefined, "baseURL")\n  .build();\n// Result: { pretty: true, baseURL: "/api" }\n'})}),"\n",(0,l.jsx)(n.h3,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h4,{id:"t",children:"T"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"T"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"Record"}),"<",(0,l.jsx)(n.code,{children:"string"}),", ",(0,l.jsx)(n.code,{children:"unknown"}),">"]}),"\n",(0,l.jsx)(n.p,{children:"The type of the options object being built"}),"\n",(0,l.jsx)(n.h3,{id:"constructors",children:"Constructors"}),"\n",(0,l.jsx)(n.h4,{id:"constructor",children:"Constructor"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"new OptionBuilder<T>(): OptionBuilder<T>;\n"})}),"\n",(0,l.jsx)(n.h5,{id:"returns",children:"Returns"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"#optionbuilder",children:(0,l.jsx)(n.code,{children:"OptionBuilder"})}),"<",(0,l.jsx)(n.code,{children:"T"}),">"]}),"\n",(0,l.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,l.jsx)(n.h4,{id:"adddefault",children:"addDefault()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"addDefault<K>(value, key): this;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:73"}),"\n",(0,l.jsx)(n.p,{children:"Adds a default value (lowest priority).\nSets a value that can be overwritten by config or CLI options.\nThis method can be called at any time; precedence is enforced semantically."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-1",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"value",children:"value"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Maybe"}),"<",(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"]>"]}),"\n",(0,l.jsx)(n.p,{children:"The default value"}),"\n",(0,l.jsx)(n.h6,{id:"key",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to store the value under"}),"\n",(0,l.jsx)(n.h5,{id:"returns-1",children:"Returns"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"this"})}),"\n",(0,l.jsx)(n.p,{children:"This builder for method chaining"}),"\n",(0,l.jsx)(n.h5,{id:"example-1",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'builder.addDefault(3000, "port");\n'})}),"\n",(0,l.jsx)(n.h4,{id:"addfromcli",children:"addFromCli()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"addFromCli<K>(value, key): this;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:109"}),"\n",(0,l.jsx)(n.p,{children:"Adds a value from CLI options if provided (highest priority).\nCan override both default and config values for this key.\nThis method can be called at any time; precedence is enforced semantically."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-2",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k-1",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters-1",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"value-1",children:"value"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Maybe"}),"<",(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"]>"]}),"\n",(0,l.jsx)(n.p,{children:"The CLI option value"}),"\n",(0,l.jsx)(n.h6,{id:"key-1",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to store the value under"}),"\n",(0,l.jsx)(n.h5,{id:"returns-2",children:"Returns"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"this"})}),"\n",(0,l.jsx)(n.p,{children:"This builder for method chaining"}),"\n",(0,l.jsx)(n.h5,{id:"example-2",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'builder.addFromCli(cliOpts.port, "port");\n'})}),"\n",(0,l.jsx)(n.h4,{id:"addfromconfig",children:"addFromConfig()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"addFromConfig<K>(value, key): this;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:91"}),"\n",(0,l.jsx)(n.p,{children:"Adds a value from config file if provided (medium priority).\nCan override default values if the config value exists.\nThis method can be called at any time; precedence is enforced semantically."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-3",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k-2",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters-2",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"value-2",children:"value"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Maybe"}),"<",(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"]>"]}),"\n",(0,l.jsx)(n.p,{children:"The config file option value"}),"\n",(0,l.jsx)(n.h6,{id:"key-2",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to store the value under"}),"\n",(0,l.jsx)(n.h5,{id:"returns-3",children:"Returns"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"this"})}),"\n",(0,l.jsx)(n.p,{children:"This builder for method chaining"}),"\n",(0,l.jsx)(n.h5,{id:"example-3",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'builder.addFromConfig(config.port, "port");\n'})}),"\n",(0,l.jsx)(n.h4,{id:"build",children:"build()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"build(): Partial<T>;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:222"}),"\n",(0,l.jsx)(n.p,{children:"Returns the built options object with all accumulated values.\nThe object contains all keys that were set during the building process."}),"\n",(0,l.jsx)(n.p,{children:"Note: The returned object may be a partial object containing only the keys\nthat were set. Callers should handle potentially missing properties.\nReturns a defensive copy of the object to prevent external mutations of\ninternal state. Arrays and objects are shallow-copied to protect against\nexternal modifications."}),"\n",(0,l.jsx)(n.h5,{id:"returns-4",children:"Returns"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Partial"}),"<",(0,l.jsx)(n.code,{children:"T"}),">"]}),"\n",(0,l.jsxs)(n.p,{children:["The constructed options object with type ",(0,l.jsx)(n.code,{children:"Partial<T>"})," (may not have all properties of ",(0,l.jsx)(n.code,{children:"T"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"get",children:"get()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"get<K>(key): T[K] | undefined;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:199"}),"\n",(0,l.jsx)(n.p,{children:"Gets the current value for a key without building.\nUseful for conditional logic during building.\nReturns a shallow copy for arrays and objects to prevent external mutations.\nNote: Nested objects and arrays are not deep copied."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-4",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k-3",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters-3",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"key-3",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to get"}),"\n",(0,l.jsx)(n.h5,{id:"returns-5",children:"Returns"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"] | ",(0,l.jsx)(n.code,{children:"undefined"})]}),"\n",(0,l.jsxs)(n.p,{children:["The current value for the key, or ",(0,l.jsx)(n.code,{children:"undefined"})," if not set"]}),"\n",(0,l.jsx)(n.h4,{id:"transform",children:"transform()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"transform<K>(key, fn): this;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:158"}),"\n",(0,l.jsx)(n.p,{children:"Transforms a value using a function if the key exists.\nUseful for processing values after they've been set."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-5",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k-4",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters-4",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"key-4",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to transform"}),"\n",(0,l.jsx)(n.h6,{id:"fn",children:"fn"}),"\n",(0,l.jsxs)(n.p,{children:["(",(0,l.jsx)(n.code,{children:"v"}),") => ",(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"]"]}),"\n",(0,l.jsx)(n.p,{children:"Function that transforms the current value"}),"\n",(0,l.jsx)(n.h5,{id:"returns-6",children:"Returns"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"this"})}),"\n",(0,l.jsx)(n.p,{children:"This builder for method chaining"}),"\n",(0,l.jsx)(n.h5,{id:"example-4",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'builder.transform("path", (p) => resolve(p));\n'})}),"\n",(0,l.jsx)(n.h4,{id:"transformif",children:"transformIf()"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"transformIf<K>(\n   key,\n   predicate,\n   fn): this;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Defined in: options/builder.ts:179"}),"\n",(0,l.jsx)(n.p,{children:"Conditionally applies a transformation if a predicate is true.\nUseful for applying different transformations based on other values."}),"\n",(0,l.jsx)(n.h5,{id:"type-parameters-6",children:"Type Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"k-5",children:"K"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"K"})," ",(0,l.jsx)(n.em,{children:"extends"})," ",(0,l.jsx)(n.code,{children:"string"})," | ",(0,l.jsx)(n.code,{children:"number"})," | ",(0,l.jsx)(n.code,{children:"symbol"})]}),"\n",(0,l.jsx)(n.h5,{id:"parameters-5",children:"Parameters"}),"\n",(0,l.jsx)(n.h6,{id:"key-5",children:"key"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"K"})}),"\n",(0,l.jsx)(n.p,{children:"The key to potentially transform"}),"\n",(0,l.jsx)(n.h6,{id:"predicate",children:"predicate"}),"\n",(0,l.jsxs)(n.p,{children:["(",(0,l.jsx)(n.code,{children:"merged"}),") => ",(0,l.jsx)(n.code,{children:"boolean"})]}),"\n",(0,l.jsx)(n.p,{children:"Function that determines if transformation should apply"}),"\n",(0,l.jsx)(n.h6,{id:"fn-1",children:"fn"}),"\n",(0,l.jsxs)(n.p,{children:["(",(0,l.jsx)(n.code,{children:"v"}),") => ",(0,l.jsx)(n.code,{children:"T"}),"[",(0,l.jsx)(n.code,{children:"K"}),"]"]}),"\n",(0,l.jsx)(n.p,{children:"Function that transforms the value if predicate is true"}),"\n",(0,l.jsx)(n.h5,{id:"returns-7",children:"Returns"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"this"})}),"\n",(0,l.jsx)(n.p,{children:"This builder for method chaining"}),"\n",(0,l.jsx)(n.h5,{id:"example-5",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'builder.transformIf(\n  "path",\n  () => force,\n  (p) => resolve(p),\n);\n'})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);