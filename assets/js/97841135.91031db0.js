"use strict";(globalThis.webpackChunk_graphql_markdown_website=globalThis.webpackChunk_graphql_markdown_website||[]).push([[5569],{26894(e,n,o){o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var t=o(87987),i=o(74848),r=o(28453);const s={description:"Customize GraphQL-Markdown with lifecycle hooks. Examples for modifying output, adding custom processing, and integrating with build pipelines.",keywords:["GraphQL-Markdown hooks","lifecycle events","custom processing","build integration","documentation hooks"]},a="Hooks Recipes",d={},c=[{value:"Available Hooks",id:"available-hooks",level:2},{value:"Using Hooks with Docusaurus",id:"using-hooks-with-docusaurus",level:2},{value:"Generate index.md files",id:"generate-indexmd-files",level:2},{value:"Display response types for operations",id:"display-response-types-for-operations",level:2},{value:"Response Type",id:"response-type",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"hooks-recipes",children:"Hooks Recipes"})}),"\n",(0,i.jsxs)(n.p,{children:["This page lists examples of usage of ",(0,i.jsx)(n.a,{href:"/api/category/events",children:"hooks"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Hooks are part of the ",(0,i.jsx)(n.a,{href:"/docs/advanced/integration-with-frameworks",children:"documentation frameworks integration"})," API."]})}),"\n",(0,i.jsx)(n.h2,{id:"available-hooks",children:"Available Hooks"}),"\n",(0,i.jsx)(n.p,{children:"GraphQL-Markdown provides lifecycle hooks for customizing the documentation generation process:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Generation Hooks:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeSchemaLoadHook"})," / ",(0,i.jsx)(n.code,{children:"afterSchemaLoadHook"})," - Schema loading"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeDiffCheckHook"})," / ",(0,i.jsx)(n.code,{children:"afterDiffCheckHook"})," - Schema diff checking"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeRenderRootTypesHook"})," / ",(0,i.jsx)(n.code,{children:"afterRenderRootTypesHook"})," - Root types rendering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeRenderHomepageHook"})," / ",(0,i.jsx)(n.code,{children:"afterRenderHomepageHook"})," - Homepage rendering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeRenderTypeEntitiesHook"})," / ",(0,i.jsx)(n.code,{children:"afterRenderTypeEntitiesHook"})," - Type entities rendering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforeGenerateIndexMetafileHook"})," / ",(0,i.jsx)(n.code,{children:"afterGenerateIndexMetafileHook"})," - Index metafile generation"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Printer Hooks:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforePrintCodeHook"})," / ",(0,i.jsx)(n.code,{children:"afterPrintCodeHook"})," - Code block generation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beforePrintTypeHook"})," / ",(0,i.jsx)(n.code,{children:"afterPrintTypeHook"})," - Type documentation generation"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All hooks receive an ",(0,i.jsx)(n.code,{children:"event"})," object with a ",(0,i.jsx)(n.code,{children:"data"})," property containing context-specific information. Printer hooks also have an ",(0,i.jsx)(n.code,{children:"output"})," property that can be modified."]}),"\n",(0,i.jsx)(n.h2,{id:"using-hooks-with-docusaurus",children:"Using Hooks with Docusaurus"}),"\n",(0,i.jsx)(n.p,{children:"When using Docusaurus, you can extend the default MDX module to add custom hooks while keeping all the built-in formatters:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="custom-mdx.cjs"',children:'const DocusaurusMDX = require("@graphql-markdown/docusaurus/mdx");\n\nconst afterPrintCodeHook = async (event) => {\n  // Your custom logic here\n  event.output = `${event.output}\\n\\n\x3c!-- Custom content --\x3e`;\n};\n\nmodule.exports = {\n  ...DocusaurusMDX,  // Keep all default formatters\n  afterPrintCodeHook, // Add your custom hook\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:"Then configure your Docusaurus plugin to use the custom module:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:'plugins: [\n  [\n    "@graphql-markdown/docusaurus",\n    {\n      schema: "./schema.graphql",\n      // highlight-next-line\n      mdxParser: require.resolve("./custom-mdx.cjs"),\n      // ... other options\n    },\n  ],\n],\n'})}),"\n",(0,i.jsx)(n.h2,{id:"generate-indexmd-files",children:"Generate index.md files"}),"\n",(0,i.jsxs)(n.p,{children:["You can use this hook to generate ",(0,i.jsx)(n.code,{children:"index.md"})," files."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-md",children:'---\ntitle: "Unions"\n---\n\n- [ActivityUnion](./activity-union.mdx)\n- [LikeableUnion](./likeable-union.mdx)\n- [NotificationUnion](./notification-union.mdx)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Declare the custom module in GraphQL-Markdown configuration ",(0,i.jsx)(n.code,{children:'mdxParser: "./custom-mdx.mjs"'}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="custom-mdx.mjs"',children:'\nimport { join, dirname, resolve, basename } from "node:path";\nimport { appendFile } from "node:fs/promises";\n\nimport {\n  ensureDir,\n  fileExists,\n  saveFile,\n  startCase,\n} from "@graphql-markdown/utils";\n\nconst INDEX_MD = "index.md";\n\n/**\n * Hook that generates an index metadata file for a category directory.\n * \n * This hook is executed before generating index metadata files. \n * It checks if an index.md file exists in the specified directory. \n * If not, it creates one with a title derived from the category name.\n */\nconst beforeGenerateIndexMetafileHook = async (event) => {\n  const { dirPath, category } = event.data;\n  const filePath = join(dirPath, INDEX_MD);\n\n  if (await fileExists(filePath)) {\n    return;\n  }\n\n  const label = startCase(category);\n  const content = `---\\ntitle: "${label}"\\n---\\n\\n`;\n  await ensureDir(dirPath);\n  await saveFile(filePath, content);\n};\n\n/**\n * Hook that appends a link to the entity\'s page in the index file after rendering type entities.\n * \n * This hook is triggered after a GraphQL type entity is rendered. \n * It checks if an index file exists in the same directory as the \n * rendered entity, and if so, appends a markdown link to the entity\'s page.\n */\nconst afterRenderTypeEntitiesHook = async (event) => {\n  const { filePath, name } = event.data;\n  const indexFilePath = resolve(dirname(filePath), INDEX_MD);\n  const pageFileName = basename(filePath);\n  if (await fileExists(indexFilePath)) {\n    const entryLine = `- [${name}](./${pageFileName})\\n`;\n    await appendFile(indexFilePath, entryLine);\n  }\n};\n\nexport { \n  beforeGenerateIndexMetafileHook, \n  afterRenderTypeEntitiesHook \n};\n'})}),"\n",(0,i.jsx)(n.h2,{id:"display-response-types-for-operations",children:"Display response types for operations"}),"\n",(0,i.jsx)(n.p,{children:"You can use this hook to automatically add the response type's SDL (Schema Definition Language) after each GraphQL operation (query, mutation, subscription)."}),"\n",(0,i.jsx)(n.p,{children:"This is useful when you want your documentation to show not just the operation signature but also the structure of the data it returns."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before (default output):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query user(id: ID!): User\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After (with hook):"})}),"\n",(0,i.jsx)(n.p,{children:'The hook appends a "Response Type" section after the operation\'s code block:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query user(id: ID!): User\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-type",children:"Response Type"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"type User {\n  id: ID!\n  name: String!\n  email: String\n  posts: [Post!]!\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Declare the custom module in GraphQL-Markdown configuration ",(0,i.jsx)(n.code,{children:'mdxParser: "./custom-mdx.mjs"'}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="custom-mdx.mjs"',children:'import { \n  isOperation, \n  isScalarType, \n  getNamedType \n} from "@graphql-markdown/graphql";\nimport { Printer } from "@graphql-markdown/printer-legacy";\n\n/**\n * Hook that adds the response type\'s SDL after operation code blocks.\n *\n * This hook is executed after generating the code block for a GraphQL type.\n * For operations (queries, mutations, subscriptions), it appends a second\n * code block showing the structure of the return type.\n */\nconst afterPrintCodeHook = async (event) => {\n  const { type, options } = event.data;\n\n  // Only process operations (types with a `type` property for return type)\n  if (!isOperation(type)) {\n    return;\n  }\n\n  // Get the unwrapped return type (removes NonNull and List wrappers)\n  const returnType = getNamedType(type.type);\n  if (!returnType) {\n    return;\n  }\n\n  // Skip scalar types - they don\'t need expanded documentation\n  if (isScalarType(returnType)) {\n    return;\n  }\n\n  // Generate the SDL code block for the return type\n  const returnTypeCode = Printer.printCode(returnType, {\n    ...options,\n    codeSection: true,\n  });\n\n  if (returnTypeCode) {\n    event.output = `${event.output}\\n\\n### Response Type\\n\\n${returnTypeCode}`;\n  }\n};\n\nexport { afterPrintCodeHook };\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You can customize the heading level or text by changing ",(0,i.jsx)(n.code,{children:"### Response Type"})," to match your documentation style."]})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"getNamedType"})," function from ",(0,i.jsx)(n.code,{children:"@graphql-markdown/graphql"})," unwraps GraphQL type wrappers like ",(0,i.jsx)(n.code,{children:"NonNull"})," and ",(0,i.jsx)(n.code,{children:"List"}),". For example, ",(0,i.jsx)(n.code,{children:"[User!]!"})," becomes ",(0,i.jsx)(n.code,{children:"User"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453(e,n,o){o.d(n,{R:()=>s,x:()=>a});var t=o(96540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},87987(e){e.exports=JSON.parse('{"id":"advanced/hook-recipes","title":"Hooks Recipes","description":"Customize GraphQL-Markdown with lifecycle hooks. Examples for modifying output, adding custom processing, and integrating with build pipelines.","source":"@site/docs/advanced/hook-recipes.md","sourceDirName":"advanced","slug":"/advanced/hook-recipes","permalink":"/docs/advanced/hook-recipes","draft":false,"unlisted":false,"editUrl":"https://github.com/graphql-markdown/graphql-markdown/tree/main/docs/advanced/hook-recipes.md","tags":[],"version":"current","frontMatter":{"description":"Customize GraphQL-Markdown with lifecycle hooks. Examples for modifying output, adding custom processing, and integrating with build pipelines.","keywords":["GraphQL-Markdown hooks","lifecycle events","custom processing","build integration","documentation hooks"]},"sidebar":"defaultSidebar","previous":{"title":"Homepage","permalink":"/docs/advanced/homepage"},"next":{"title":"Integration with Frameworks","permalink":"/docs/advanced/integration-with-frameworks"}}')}}]);